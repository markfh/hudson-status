#!/usr/bin/env ruby
require 'open-uri'
require 'nokogiri'

xml = open("#{ARGV[0]}/api/xml".sub('file://','')).read
Nokogiri.parse(xml).css('hudson > job').each do |job|
  color_codes = {
    'red' => 'Failed',
    'blue' => 'Success'
  }
  name = job.css('name').first.content
  color = color_codes[job.css('color').first.content] || 'Unknown'
  puts "#{name}: #{color}"
end